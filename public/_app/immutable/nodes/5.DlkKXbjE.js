import{t as f,a as b}from"../chunks/DjVNrhRO.js";import"../chunks/BbcAQZ-t.js";import{p as ie,j as M,b as re,a as o,c as m,r as u,g as t,h as D,s as A,aj as z,f as oe}from"../chunks/Dtbr3opF.js";import{s as k}from"../chunks/D0Vkali-.js";import{i as K}from"../chunks/DIZ7JNA_.js";import{e as U,i as C}from"../chunks/BZtUa7kc.js";import{r as $}from"../chunks/tH0U2CTM.js";import{e as h}from"../chunks/BKi0Csyz.js";import{b as j}from"../chunks/Bo4MGM3Z.js";import{i as ce}from"../chunks/IH6nDiQV.js";import{P as W}from"../chunks/BWME_Ccl.js";var ue=f('<div class="config-item svelte-1m82rc1"><label class="svelte-1m82rc1">Style:</label> <input type="text" placeholder="e.g., 2BR" class="svelte-1m82rc1"> <label class="svelte-1m82rc1">Baseline Rent:</label> <input type="number" min="0" class="svelte-1m82rc1"> <button class="svelte-1m82rc1">Remove</button></div>'),me=f('<div class="config-area svelte-1m82rc1"><h2 class="svelte-1m82rc1">Configuration</h2> <div class="config-item svelte-1m82rc1"><label class="svelte-1m82rc1">Short-Term Lease Threshold (months):</label> <input type="number" min="1" class="svelte-1m82rc1"></div> <h3 class="svelte-1m82rc1">Unit Style Baselines</h3> <!> <button class="svelte-1m82rc1">Add Unit Style</button></div>'),ve=f('<tr class="svelte-1m82rc1"><td class="svelte-1m82rc1"> </td><td class="svelte-1m82rc1"> </td><td class="issue svelte-1m82rc1"> </td></tr>'),pe=f('<li class="svelte-1m82rc1"> </li>'),de=f('<table class="svelte-1m82rc1"><thead class="svelte-1m82rc1"><tr class="svelte-1m82rc1"><th class="svelte-1m82rc1">Unit</th><th class="svelte-1m82rc1">Tenant</th><th class="svelte-1m82rc1">Issue</th></tr></thead><tbody class="svelte-1m82rc1"></tbody></table> <h3 class="svelte-1m82rc1">Assumptions Made:</h3> <ul class="svelte-1m82rc1"></ul>',1),be=f('<p class="svelte-1m82rc1">No flagged units found or analysis not yet run.</p>'),he=f('<div class="page-container svelte-1m82rc1"><h1 class="svelte-1m82rc1">Apartment Lease & Rent Analysis</h1> <button class="svelte-1m82rc1"> </button> <!> <div class="svelte-1m82rc1"><label class="svelte-1m82rc1">Lease Data CSV</label> <input type="file" accept=".csv" class="svelte-1m82rc1"> <button class="svelte-1m82rc1">Download Combined Template</button> <button class="svelte-1m82rc1">Load Sample Data</button></div> <button class="svelte-1m82rc1">Run Analysis</button> <!></div>');function Te(q,F){ie(F,!1);let B=[],v=D([]),S=D([]),E=D(8),y=D([{style:"2BR",baseline:1300},{style:"Studio",baseline:1100},{style:"3BR",baseline:1600}]),w=D(!1);function H(a){const l=a.target;if(!l||!l.files)return;const c=l.files[0];W.parse(c,{header:!0,skipEmptyLines:!0,complete:e=>{B=e.data}})}function I(a){let l="";l=`unitNumber,tenantName,leaseStart,leaseEnd,rentAmount,styleType
101,John Doe,2023-01-01,2024-01-01,1300,2BR
102,Jane Smith,2023-03-01,2024-03-01,1150,Studio
103,Bob Brown,2023-02-15,2024-02-14,1400,2BR
104,Alice Johnson,2023-04-01,2024-04-01,1350,2BR
105,Tom White,2023-05-01,2024-05-01,1500,3BR
106,Emily Davis,2023-06-01,2024-06-01,1600,3BR
107,Michael Green,2023-07-01,2024-07-01,1250,2BR
108,Susan Black,2023-08-01,2024-08-01,1100,Studio
109,Chris Blue,2023-09-01,2023-11-01,1200,2BR
110,Laura Orange,2023-10-01,2024-10-01,1550,3BR
111,Kevin Purple,2023-11-01,2024-11-01,1200,2BR
112,Nancy Gold,2023-12-01,2024-06-01,900,Studio
113,Mark Red,2023-01-15,2024-01-15,1350,2BR
114,Lucy Blue,2023-02-01,2023-07-01,1100,Studio
115,David Black,2023-03-10,2024-03-10,1650,3BR`;const c=new Blob([l],{type:"text/csv;charset=utf-8;"}),e=document.createElement("a");e.href=URL.createObjectURL(c),e.setAttribute("download",`${a}-template.csv`),e.click()}function Q(){W.parse(`unitNumber,tenantName,leaseStart,leaseEnd,rentAmount,styleType
101,John Doe,2023-01-01,2024-01-01,1300,2BR
102,Jane Smith,2023-03-01,2024-03-01,1150,Studio
103,Bob Brown,2023-02-15,2024-02-14,1400,2BR
104,Alice Johnson,2023-04-01,2024-04-01,1350,2BR
105,Tom White,2023-05-01,2024-05-01,1500,3BR
106,Emily Davis,2023-06-01,2024-06-01,1600,3BR
107,Michael Green,2023-07-01,2024-07-01,1250,2BR
108,Susan Black,2023-08-01,2024-08-01,1100,Studio
109,Chris Blue,2023-09-01,2023-11-01,1200,2BR
110,Laura Orange,2023-10-01,2024-10-01,1550,3BR
111,Kevin Purple,2023-11-01,2024-11-01,1200,2BR
112,Nancy Gold,2023-12-01,2024-06-01,900,Studio
113,Mark Red,2023-01-15,2024-01-15,1350,2BR
114,Lucy Blue,2023-02-01,2023-07-01,1100,Studio
115,David Black,2023-03-10,2024-03-10,1650,3BR`,{header:!0,skipEmptyLines:!0,complete:l=>{B=l.data}})}function J(a,l){const c={};return a.forEach(e=>{const s=l(e);c[s]||(c[s]=[]),c[s].push(e)}),c}function X(){A(v,[]),A(S,[]);let a={};t(y).forEach(e=>{a[e.style]=e.baseline}),B.forEach(e=>{let s,n;!e.leaseStart||!e.leaseEnd?(t(S).push(`Missing lease dates for unit ${e.unitNumber}. Assuming a 12-month lease.`),s=new Date,n=new Date(s),n.setMonth(n.getMonth()+12)):(s=new Date(e.leaseStart),n=new Date(e.leaseEnd));const i=(n.getTime()-s.getTime())/(1e3*60*60*24*30);i<=t(E)&&t(v).push({unit:e.unitNumber,tenant:e.tenantName,issue:`Short-term lease (${i.toFixed(1)} months)`});let r=a[e.styleType]||1200;e.rentAmount<r&&t(v).push({unit:e.unitNumber,tenant:e.tenantName,issue:`Low rent amount (${e.rentAmount}) for ${e.styleType} (baseline ${r})`})});const l=J(B,e=>e.unitNumber);Object.entries(l).forEach(([e,s])=>{if(s.length>1){s.sort((n,i)=>new Date(n.leaseStart).getTime()-new Date(i.leaseStart).getTime());for(let n=1;n<s.length;n++){const i=s[n-1],r=s[n];Math.abs(r.rentAmount-i.rentAmount)<.01&&t(v).push({unit:e,tenant:r.tenantName,issue:`No rent increase between leases starting ${i.leaseStart} and ${r.leaseStart}`})}}});const c=J(B,e=>e.tenantName.toLowerCase());Object.entries(c).forEach(([e,s])=>{const n=new Set(s.map(i=>i.unitNumber));n.size>1&&t(v).push({unit:Array.from(n).join(", "),tenant:e,issue:`Tenant appears in multiple units (${n.size} units)`})}),t(S).length===0&&t(S).push("No assumptions were needed based on the provided data.")}function Y(){t(y).push({style:"",baseline:0})}function Z(a){t(y).splice(a,1)}ce();var L=he(),N=o(m(L),2),ee=m(N,!0);u(N);var O=o(N,2);{var te=a=>{var l=me(),c=o(m(l),2),e=o(m(c),2);$(e),u(c);var s=o(c,4);U(s,1,()=>t(y),C,(i,r,p)=>{var _=ue(),d=o(m(_),2);$(d);var g=o(d,4);$(g);var T=o(g,2);u(_),j(d,()=>t(r).style,R=>(t(r).style=R,z(()=>t(y)))),j(g,()=>t(r).baseline,R=>(t(r).baseline=R,z(()=>t(y)))),h("click",T,()=>Z(p)),b(i,_)});var n=o(s,2);u(l),j(e,()=>t(E),i=>A(E,i)),h("click",n,Y),b(a,l)};K(O,a=>{t(w)&&a(te)})}var x=o(O,2),V=o(m(x),2),G=o(V,2),ae=o(G,2);u(x);var P=o(x,2),se=o(P,2);{var ne=a=>{var l=de(),c=oe(l),e=o(m(c));U(e,5,()=>t(v),C,(n,i)=>{var r=ve(),p=m(r),_=m(p,!0);u(p);var d=o(p),g=m(d,!0);u(d);var T=o(d),R=m(T,!0);u(T),u(r),M(()=>{k(_,t(i).unit),k(g,t(i).tenant),k(R,t(i).issue)}),b(n,r)}),u(e),u(c);var s=o(c,4);U(s,5,()=>t(S),C,(n,i)=>{var r=pe(),p=m(r,!0);u(r),M(()=>k(p,t(i))),b(n,r)}),u(s),b(a,l)},le=a=>{var l=be();b(a,l)};K(se,a=>{t(v).length>0?a(ne):a(le,!1)})}u(L),M(()=>k(ee,t(w)?"Hide Configuration":"Show Configuration")),h("click",N,()=>A(w,!t(w))),h("change",V,H),h("click",G,()=>I("combined")),h("click",ae,Q),h("click",P,X),b(q,L),re()}export{Te as component};
